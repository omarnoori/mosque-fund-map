(this["webpackJsonpmapbox-test"]=this["webpackJsonpmapbox-test"]||[]).push([[0],{21:function(e,t,n){e.exports=n(37)},26:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){e.exports=n.p+"static/media/mosque1.f26d7619.png"},32:function(e,t,n){e.exports=n.p+"static/media/mosque2.f90eacbc.png"},33:function(e,t,n){e.exports=n.p+"static/media/mosque3.faee101b.png"},34:function(e,t,n){e.exports=n.p+"static/media/mosque4.19709cd1.png"},35:function(e,t,n){e.exports=n.p+"static/media/mosque5.455e3bf2.png"},36:function(e,t,n){e.exports=n.p+"static/media/mosque6.7132b140.png"},37:function(e,t,n){"use strict";n.r(t);var o=n(2),a=n.n(o),c=n(16),r=n.n(c),i=(n(26),n(12)),s=n(7),u=n(20),p=n(9),l=n(19),m=(n(30),function(){return fetch.apply(void 0,arguments).then((function(e){return e.json()}))});function d(){var e=Object(o.useState)({latitude:33.9174485,longitude:-118.0283703,width:"100vw",height:"100vh",zoom:7}),t=Object(s.a)(e,2),c=t[0],r=t[1],d=Object(o.useRef)(),f=Object(o.useState)({}),b=Object(s.a)(f,2),g=(b[0],b[1],Object(u.a)("https://us-central1-mosque-fund-fb.cloudfunctions.net/api/mosques?dev=true&limit=250",{fetcher:m})),h=g.data,j=g.error,x=(h&&!j?h.slice(0,250):[]).map((function(e,t){var o=[n(31),n(32),n(33),n(34),n(35),n(36)];return{type:"Feature",properties:{cluster:!1,placeId:e.placeId,category:"Mosque",iconUrl:o[t%6]},geometry:{type:"Point",coordinates:[parseFloat(e.longitude),parseFloat(e.latitude)]}}})),q=d.current?d.current.getMap().getBounds().toArray().flat():null,y=Object(l.a)({points:x,bounds:q,zoom:c.zoom,options:{radius:60,maxZoom:20}}),O=y.clusters,v=y.supercluster;return console.log(O),a.a.createElement("div",null,a.a.createElement(p.c,Object.assign({},c,{maxZoom:20,mapStyle:"mapbox://styles/mosquefund/ckczhvmog02781io8pfq9abpt",mapboxApiAccessToken:"pk.eyJ1IjoibW9zcXVlZnVuZCIsImEiOiJja2N3ank1ZXUwMnVnMnNwbXh2eXB5OG04In0.J56Th828d2K-c5sJ8tLsjg",onViewportChange:function(e){r(Object(i.a)({},e))},ref:d}),O.map((function(e){var t=Object(s.a)(e.geometry.coordinates,2),n=t[0],o=t[1],u=e.properties,l=u.cluster,m=u.point_count;return l?a.a.createElement(p.b,{key:"cluster-".concat(e.id),latitude:o,longitude:n},a.a.createElement("div",{className:"cluster-marker",style:{width:"".concat(10+m/x.length*20,"px"),height:"".concat(10+m/x.length*20,"px")},onClick:function(){var t=Math.min(v.getClusterExpansionZoom(e.id),20);r(Object(i.a)(Object(i.a)({},c),{},{latitude:o,longitude:n,zoom:t,transitionInterpolator:new p.a({speed:2}),transitionDuration:"auto"}))}},m)):a.a.createElement(p.b,{key:"mosque-".concat(e.properties.placeId),latitude:o,longitude:n},a.a.createElement("button",{className:"mosque-marker"},a.a.createElement("img",{src:e.properties.iconUrl,alt:"mosque icon"})))}))))}r.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(d,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.b7abdcee.chunk.js.map